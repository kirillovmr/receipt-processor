# Receipt Processor API Showcase

# Introduction

I built a webservice that fulfilled the requirements of a documented API. 

I referenced the formal definition provided in the [api.yml](https://github.com/fetch-rewards/receipt-processor-challenge/blob/25a714e38c711b18fab93f9d56afc9a7b85807bd/api.yml) file and used the information in the README to complete the task. 

The webservice was successfully tested against the described API.

Base API url: [https://receipt-processor-api.onrender.com](https://receipt-processor-api.onrender.com/)

> Please not that a webservice is running in a free container for demo purposes, the container goes to sleep after 30min of inactivity. Therefore be patient (up to 15s) on the first load of the following link.
> 

---

# API Specification

### ➡️ Endpoint: Process Receipts

- Path: `/receipts/process`
- Method: `POST`
- Payload: Receipt JSON
- Response: JSON containing an id for the receipt.

ℹ️ Takes in a JSON Receipt and returns a JSON object with an ID generated by your code.

↩️ Example success response:

```json
{ "id": "7fb1377b-b223-49d9-a31a-5a02701dd310" }
```

⚠️ Example error response (if given receipt is in wrong format):

```
The receipt is invalid: {validation error}
```

---

## ➡️ Endpoint: Get Points

- Path: `/receipts/{id}/points`
- Method: `GET`
- Response: A JSON object containing the number of points awarded.

ℹ️ A simple Getter endpoint that looks up the receipt by the ID and returns an object specifying the points awarded.

↩️ Example success response:

```json
{ "points": 32 }
```

⚠️ Example error response (if no Receipt was found under the given id):

```
No receipt found for that id
```

---

# Score calculation rules

These rules collectively define how many points are being awarded to a Receipt.

- One point for every alphanumeric character in the retailer name.
- 50 points if the total is a round dollar amount with no cents.
- 25 points if the total is a multiple of `0.25`.
- 5 points for every two items on the receipt.
- If the trimmed length of the item description is a multiple of 3, multiply the price by `0.2` and round up to the nearest integer. The result is the number of points earned.
- 6 points if the day in the purchase date is odd.
- 10 points if the time of purchase is after 2:00pm and before 4:00pm.

---

# Defined Types

These types were defined to provide type checking and type annotations, since it leads to more robust and reliable code:

## `Type` Item

```tsx
interface Item {
    shortDescription: string    // "Mountain Dew 12PK"
    price: string               // "6.49"
}
```

## `Type` Receipt

```tsx
interface Receipt {
    retailer: string        // "Target"
    purchaseDate: string    // "2022-01-01"
    purchaseTime: string    // "13:01"
    total: string           // "6.49"
    items: Item[]
}
```

## `Type` ValidateResult

```tsx
interface ValidateResult {
    valid: boolean
    error: string
}
```

---
